<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Radar Chart Tool</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style type="text/tailwindcss">
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">
<div class="bg-white p-8 rounded-xl shadow-xl w-full max-w-4xl">
<header class="mb-8 text-center">
<input class="text-4xl font-bold text-slate-700 text-center w-full border-none focus:ring-0 focus:outline-none" id="chart-title" type="text" value="Radar Chart Generator"/>
<p class="text-slate-500 mt-2">Input names and values for <span id="field-count-display">5</span> fields. Total points cannot exceed 100.</p>
</header>
<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
<div class="md:col-span-1 space-y-6">
<div>
<div class="flex items-center justify-between mb-4">
<h2 class="text-xl font-semibold text-slate-600">Enter Field Details</h2>
<div class="flex items-center space-x-2">
<label class="text-sm font-medium text-slate-600" for="num-fields">Fields:</label>
<select class="w-20 p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-sky-500 focus:border-sky-500 text-sm" id="num-fields" name="num-fields">
<option value="3">3</option>
<option value="4">4</option>
<option selected="" value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
<div class="space-y-4 max-h-[400px] overflow-y-auto pr-2" id="fields-container">
</div>
</div>
<div class="mt-6 pt-6 border-t border-slate-200">
<h3 class="text-lg font-medium text-slate-600">Total Points</h3>
<div class="flex items-center justify-between mt-2">
<p class="text-2xl font-bold text-slate-700" id="total-points-display">0 / 100</p>
<p class="text-sm text-red-500" id="error-message"></p>
</div>
</div>
<button class="w-full bg-slate-500 hover:bg-slate-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-150 ease-in-out flex items-center justify-center" id="reset-button">
<span class="material-icons mr-2">refresh</span>
                    Reset All
                </button>
</div>
<div class="md:col-span-2 flex items-center justify-center bg-slate-50 p-6 rounded-lg">
<div class="w-full max-w-md h-[400px] md:h-[500px]">
<canvas id="radarChart"></canvas>
</div>
</div>
</div>
</div>
<script>
        const MAX_TOTAL_POINTS = 100;
        let currentNumFields = 5;
        let chartInstance = null;
        let fieldData = [];
        const fieldsContainer = document.getElementById('fields-container');
        const totalPointsDisplay = document.getElementById('total-points-display');
        const errorMessageElement = document.getElementById('error-message');
        const resetButton = document.getElementById('reset-button');
        const numFieldsSelect = document.getElementById('num-fields');
        const fieldCountDisplay = document.getElementById('field-count-display');
        const chartTitleInput = document.getElementById('chart-title');
        function initializeFieldData(numFields) {
            fieldData = Array(numFields).fill(null).map((_, i) => ({
                name: `Field ${i + 1}`,
                value: 0
            }));
        }
        function renderFields() {
            fieldsContainer.innerHTML = '';
            fieldData.forEach((field, index) => {
                const fieldDiv = document.createElement('div');
                fieldDiv.classList.add('flex', 'flex-col', 'gap-2', 'p-4', 'border', 'border-slate-200', 'rounded-lg', 'bg-slate-50');
                const nameLabel = document.createElement('label');
                nameLabel.htmlFor = `name-${index}`;
                nameLabel.classList.add('text-sm', 'font-medium', 'text-slate-600');
                nameLabel.textContent = `Field ${index + 1} Name:`;
                const nameInput = document.createElement('input');
                nameInput.type = 'text';
                nameInput.id = `name-${index}`;
                nameInput.value = field.name;
                nameInput.classList.add('w-full', 'p-2', 'border', 'border-slate-300', 'rounded-md', 'focus:ring-2', 'focus:ring-sky-500', 'focus:border-sky-500', 'text-sm');
                nameInput.addEventListener('input', (e) => {
                    fieldData[index].name = e.target.value;
                    updateChart();
                });
                const valueLabel = document.createElement('label');
                valueLabel.htmlFor = `value-${index}`;
                valueLabel.classList.add('text-sm', 'font-medium', 'text-slate-600', 'mt-2');
                valueLabel.textContent = `Value (0 - ${MAX_TOTAL_POINTS}):`;
                const valueInputContainer = document.createElement('div');
                valueInputContainer.classList.add('flex', 'items-center', 'gap-2');
                const valueInput = document.createElement('input');
                valueInput.type = 'number';
                valueInput.id = `value-${index}`;
                valueInput.value = field.value;
                valueInput.min = 0;
                valueInput.max = MAX_TOTAL_POINTS;
                valueInput.classList.add('w-full', 'p-2', 'border', 'border-slate-300', 'rounded-md', 'focus:ring-2', 'focus:ring-sky-500', 'focus:border-sky-500', 'text-sm', 'appearance-none', '[appearance:textfield]', '[&::-webkit-outer-spin-button]:appearance-none', '[&::-webkit-inner-spin-button]:appearance-none');
                valueInput.addEventListener('input', (e) => {
                    let newValue = parseInt(e.target.value) || 0;
                    if (newValue < 0) newValue = 0;
                    const currentTotalOtherFields = fieldData.reduce((sum, fd, i) => sum + (i === index ? 0 : fd.value), 0);
                    if (currentTotalOtherFields + newValue > MAX_TOTAL_POINTS) {
                        newValue = MAX_TOTAL_POINTS - currentTotalOtherFields;
                        e.target.value = newValue;
                    }
                    fieldData[index].value = newValue;
                    updateChart();
                    updateTotalPoints();
                });
                valueInputContainer.appendChild(valueInput);
                fieldDiv.appendChild(nameLabel);
                fieldDiv.appendChild(nameInput);
                fieldDiv.appendChild(valueLabel);
                fieldDiv.appendChild(valueInputContainer);
                fieldsContainer.appendChild(fieldDiv);
            });
        }
        function updateTotalPoints() {
            const currentTotal = fieldData.reduce((sum, field) => sum + field.value, 0);
            totalPointsDisplay.textContent = `${currentTotal} / ${MAX_TOTAL_POINTS}`;
            if (currentTotal > MAX_TOTAL_POINTS) {
                totalPointsDisplay.classList.remove('text-slate-700');
                totalPointsDisplay.classList.add('text-red-500');
                errorMessageElement.textContent = 'Total points exceed 100!';
            } else {
                totalPointsDisplay.classList.remove('text-red-500');
                totalPointsDisplay.classList.add('text-slate-700');
                errorMessageElement.textContent = '';
            }
        }
        function updateChart() {
            if (chartInstance) {
                chartInstance.data.labels = fieldData.map(f => f.name);
                chartInstance.data.datasets[0].data = fieldData.map(f => f.value);
                chartInstance.data.datasets[0].label = chartTitleInput.value || 'Stats'; // Update chart title
                chartInstance.options.scales.r.suggestedMax = Math.max(20, Math.ceil(MAX_TOTAL_POINTS / fieldData.length) * 2); // Adjust suggestedMax based on number of fields
                chartInstance.update();
            }
        }
        function initializeChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: fieldData.map(f => f.name),
                    datasets: [{
                        label: chartTitleInput.value || 'Stats',
                        data: fieldData.map(f => f.value),
                        fill: true,
                        backgroundColor: 'rgba(54, 162, 235, 0.3)',
                        borderColor: 'rgb(54, 162, 235)',
                        pointBackgroundColor: 'rgb(54, 162, 235)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(54, 162, 235)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: {
                        line: {
                            borderWidth: 3
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            suggestedMin: 0,
                            suggestedMax: Math.max(20, Math.ceil(MAX_TOTAL_POINTS / currentNumFields) * 2),
                            pointLabels: {
                                font: {
                                    size: 14,
                                    weight: '500'
                                },
                                color: '#334155'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                backdropColor: 'rgba(255, 255, 255, 0.75)',
                                color: '#475569',
                                stepSize: 20,
                                font: {
                                    size: 10
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false // Keep legend hidden as per original
                        },
                        title: { // Add title plugin configuration
                            display: false, // We are using the input field as the main title
                            text: chartTitleInput.value
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.r !== null) {
                                        label += context.parsed.r;
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
        function resetApplication() {
            chartTitleInput.value = "Radar Chart Generator"; // Reset title
            currentNumFields = parseInt(numFieldsSelect.value);
            fieldCountDisplay.textContent = currentNumFields;
            initializeFieldData(currentNumFields);
            renderFields();
            updateChart();
            updateTotalPoints();
        }
        resetButton.addEventListener('click', resetApplication);
        numFieldsSelect.addEventListener('change', (event) => {
            const newNumFields = parseInt(event.target.value);
            currentNumFields = newNumFields;
            fieldCountDisplay.textContent = currentNumFields;
            // Preserve existing data as much as possible
            const oldFieldData = [...fieldData];
            initializeFieldData(newNumFields);
            for (let i = 0; i < Math.min(oldFieldData.length, newNumFields); i++) {
                fieldData[i] = oldFieldData[i];
            }
            // Recalculate total and adjust if necessary
            let currentTotal = fieldData.reduce((sum, field) => sum + field.value, 0);
            if (currentTotal > MAX_TOTAL_POINTS) {
                // If total exceeds, reset values of newly added or all fields
                // This is a simple strategy; more sophisticated logic could be to scale down.
                for (let i = oldFieldData.length; i < newNumFields; i++) { // Reset only newly added fields
                    fieldData[i].value = 0;
                }
                // Recheck and if still over, reset all. This might happen if fields were removed.
                currentTotal = fieldData.reduce((sum, field) => sum + field.value, 0);
                if (currentTotal > MAX_TOTAL_POINTS) {
                    initializeFieldData(newNumFields); // Fallback to resetting all if complex adjustment needed
                }
            }
            renderFields();
            updateChart();
            updateTotalPoints();
        });
        chartTitleInput.addEventListener('input', () => {
            updateChart(); // Update chart when title changes
        });
        // Initial setup
        initializeFieldData(currentNumFields);
        renderFields();
        initializeChart();
        updateTotalPoints();
    </script>

</body></html>